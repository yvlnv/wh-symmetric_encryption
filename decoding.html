<script>
    (async() => {
        let toDecode = "hxw3NULAixOqNesA2wpl5jxLv+OoFUUG6v9pRWj+ZAlD8jLLaESet8MZDJbExs+9vllESYkuH/NVZQQ+9Xx7ImFsZyI6IkExMjhHQ00iLCJleHQiOnRydWUsImsiOiJqR1ZwY2pIbHNOank1ZV9EVmwxTG13Iiwia2V5X29wcyI6WyJlbmNyeXB0IiwiZGVjcnlwdCJdLCJrdHkiOiJvY3QifQ=="
        const algorithm = {
            name: 'AES-GCM',
            length: 128
            }
        const settings = {
            name: 'AES-GCM',
            iv: new Uint8Array([109, 182, 106, 199, 109, 135, 217, 152, 253, 55, 47, 35, 26, 88, 128, 231])
            }
        const [encryptedBufferToString, shareableKey] = atob(toDecode).split("|")
        const ciphertext = new Uint8Array(encryptedBufferToString.match(/[\s\S]/g).map(ch => ch.charCodeAt(0)))
        const key = await crypto.subtle.importKey('jwk', JSON.parse(shareableKey), algorithm, false, ["decrypt"])
        const decrypted = await crypto.subtle.decrypt(settings, key, ciphertext)
        const decodedMessage = new TextDecoder().decode(decrypted)
        console.log(decodedMessage)
    })()
</script>
